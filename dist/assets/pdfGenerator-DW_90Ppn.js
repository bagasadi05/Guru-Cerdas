import{a as f}from"./jspdf.plugin.autotable-Cos_-fnW.js";const T={name:"MI AL IRSYAD AL ISLAMIYYAH KOTA MADIUN",address:"Jl. Diponegoro No. 123, Madiun, Jawa Timur",phone:"(0351) 123456"},G=(t,k,I,N,Y,L,_)=>{var D;const{student:p,academicRecords:W,quizPoints:c,violations:b,attendanceRecords:v}=k,h=t.internal.pageSize.getHeight(),l=t.internal.pageSize.getWidth(),a=15;let e=0;const A=(n=!1)=>{t.setFillColor(30,41,59),t.rect(0,0,l,35,"F"),t.setTextColor(255,255,255),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("LAPORAN HASIL BELAJAR SISWA",l/2,14,{align:"center"}),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(T.name,l/2,22,{align:"center"}),t.setFontSize(8),t.setTextColor(209,213,219),t.text(`${T.address} | Telp: ${T.phone}`,l/2,28,{align:"center"}),e=n?45:40},H=()=>{const n=t.getNumberOfPages();for(let i=1;i<=n;i++){t.setPage(i),t.setFontSize(8),t.setFont("helvetica","normal"),t.setTextColor(107,114,128);const o=`Halaman ${i} dari ${n}`,y=`Dicetak: ${new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}`;t.text(o,l/2,h-10,{align:"center"}),t.text(y,l-a,h-10,{align:"right"}),t.setDrawColor(229,231,235),t.line(a,h-15,l-a,h-15)}},d=n=>{e+n>h-20&&(t.addPage(),A(!1))},S=(n,i=!1)=>{d(15),i?(t.setFillColor(243,244,246),t.rect(a-2,e-6,l-a*2+4,12,"F"),t.setTextColor(17,24,39)):t.setTextColor(30,41,59),t.setFontSize(12),t.setFont("helvetica","bold"),t.text(n,a,e),i||(t.setDrawColor(30,41,59),t.setLineWidth(.5),t.line(a,e+2,a+t.getTextWidth(n),e+2)),t.setTextColor(30,41,59),e+=12};A(!0),t.setTextColor(30,41,59),t.setFontSize(10),t.setFont("helvetica","normal");const w=[["Nama Siswa",": "+p.name,"Tahun Ajaran",": "+L],["Kelas",": "+(((D=p.classes)==null?void 0:D.name)||"N/A"),"Semester",": "+Y],["NIS/NISN",": - / -","Fase",": -"]];if(f(t,{startY:e,body:w,theme:"plain",styles:{fontSize:10,cellPadding:2,font:"helvetica",textColor:[30,41,59]},columnStyles:{0:{cellWidth:30,fontStyle:"bold"},1:{cellWidth:60},2:{cellWidth:30,fontStyle:"bold"},3:{cellWidth:"auto"}},margin:{left:a,right:a}}),e=t.lastAutoTable.finalY+10,W.length>0){S("A. Capaian Akademik",!0);const n=s=>s>=90?"A":s>=80?"B":s>=70?"C":s>=60?"D":"E",i={};W.forEach(s=>{const u=s.subject||"Lainnya";i[u]||(i[u]=[]),i[u].push(s)});const o=[];let y=1;Object.entries(i).forEach(([s,u])=>{u.forEach((m,O)=>{o.push([y++,O===0?s:"",m.assessment_name||"-",m.score,n(m.score),m.notes||"Capaian sesuai dengan nilai yang diperoleh."])})}),f(t,{startY:e,head:[["No","Mata Pelajaran","Penilaian","Nilai","Pred","Deskripsi Capaian"]],body:o,theme:"grid",headStyles:{fillColor:[30,41,59],textColor:[255,255,255],fontSize:9,fontStyle:"bold",halign:"center",valign:"middle"},styles:{fontSize:9,cellPadding:3,lineColor:[229,231,235],lineWidth:.1,font:"helvetica",valign:"middle"},columnStyles:{0:{cellWidth:10,halign:"center"},1:{cellWidth:35,fontStyle:"bold"},2:{cellWidth:25},3:{cellWidth:15,halign:"center"},4:{cellWidth:15,halign:"center"},5:{cellWidth:"auto"}},alternateRowStyles:{fillColor:[249,250,251]},margin:{left:a,right:a}}),e=t.lastAutoTable.finalY+10}S("B. Absensi & Perilaku",!0);const C=v.reduce((n,i)=>(i.status!=="Hadir"&&(n[i.status]=(n[i.status]||0)+1),n),{Sakit:0,Izin:0,Alpha:0}),z=e,F=(l-a*2-10)/2;f(t,{startY:z,head:[["Rekapitulasi Ketidakhadiran"]],body:[[`Sakit: ${C.Sakit} hari`],[`Izin: ${C.Izin} hari`],[`Tanpa Keterangan: ${C.Alpha} hari`]],theme:"grid",headStyles:{fillColor:[30,41,59],textColor:[255,255,255],fontSize:9,fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3,lineColor:[229,231,235],lineWidth:.1},tableWidth:F,margin:{left:a}});const R=t.lastAutoTable.finalY,$=b.length>0?b.map(n=>[`${n.description} (${n.points} poin)`]):[["Siswa menunjukkan sikap yang baik dan terpuji."]];if(f(t,{startY:z,head:[["Catatan Perilaku / Pelanggaran"]],body:$,theme:"grid",headStyles:{fillColor:[30,41,59],textColor:[255,255,255],fontSize:9,fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3,lineColor:[229,231,235],lineWidth:.1},tableWidth:F,margin:{left:l/2+5}}),e=Math.max(R,t.lastAutoTable.finalY)+10,c.length>0){S("C. Keaktifan & Prestasi",!0);const n=c.map((i,o)=>[o+1,i.quiz_name,i.points,new Date(i.created_at).toLocaleDateString("id-ID")]);f(t,{startY:e,head:[["No","Kegiatan / Prestasi","Poin","Tanggal"]],body:n,theme:"grid",headStyles:{fillColor:[30,41,59],textColor:[255,255,255],fontSize:9,fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3,lineColor:[229,231,235],lineWidth:.1},columnStyles:{0:{cellWidth:10,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:20,halign:"center"},3:{cellWidth:30,halign:"center"}},margin:{left:a,right:a}}),e=t.lastAutoTable.finalY+10}S(c.length>0?"D. Catatan Wali Kelas":"C. Catatan Wali Kelas",!0);const M=I||"Tidak ada catatan khusus untuk semester ini.",P=t.splitTextToSize(M,l-a*2-10),x=Math.max(P.length*6+10,20);d(x),t.setDrawColor(209,213,219),t.setLineWidth(.1),t.roundedRect(a,e,l-a*2,x,2,2,"S"),t.setFontSize(10),t.setFont("helvetica","italic"),t.setTextColor(55,65,81),t.text(P,a+5,e+8),e+=x+15,d(40);const g=a+30,r=l-a-50;t.setFont("helvetica","normal"),t.setFontSize(10),t.setTextColor(30,41,59),t.text("Mengetahui,",g,e,{align:"center"}),t.text("Orang Tua / Wali",g,e+5,{align:"center"});const K=new Date(N).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});t.text(`Madiun, ${K}`,r,e,{align:"center"}),t.text("Wali Kelas",r,e+5,{align:"center"}),e+=35,t.setLineWidth(.5),t.line(g-25,e,g+25,e),t.line(r-30,e,r+30,e),t.text("(___________________)",g,e+5,{align:"center"}),t.setFont("helvetica","bold");const E=(_==null?void 0:_.name)||"___________________";t.text(E,r,e+5,{align:"center"}),t.setFont("helvetica","normal"),t.setFontSize(8),t.text("NIP. -",r,e+9,{align:"center"}),H()};export{G as g};

import{j as e,b as Le,u as Pe,y as Te,r as n,g as Oe,q as Be,I as $,O as $e,Q as Ae,B as m,P as ee,K as A,U as qe,L as q,V as ae,d as Ee,W as se,v as Fe,Y as te,f as L,s as f,Z as Ve}from"./index-D1C6o8KR.js";import{S as De}from"./Select-D9Pc8JrA.js";import{u as j}from"./useMutation-DEQ-bH50.js";import{S as u}from"./Skeleton-CwYXkP0I.js";import{C as re}from"./Card-DQViJwqL.js";import{T as ze,a as Ge,b as Ue,c as He}from"./Tabs-46UBlh0T.js";import{B as Re}from"./BottomSheet-B_e8xa_t.js";const Qe=()=>e.jsxs("div",{className:"cosmic-bg w-full min-h-full p-4 sm:p-6 md:p-8 relative text-white flex flex-col",children:[e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"w-full md:w-1/2 space-y-2",children:[e.jsx(u,{className:"h-10 w-full"}),e.jsx(u,{className:"h-5 w-3/4"})]}),e.jsxs("div",{className:"flex w-full md:w-auto items-center gap-2",children:[e.jsx(u,{className:"h-10 w-full md:w-48"}),e.jsx(u,{className:"h-10 w-24"}),e.jsx(u,{className:"h-10 w-28"})]})]}),e.jsxs("div",{className:"relative z-10 bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6 mb-8",children:[e.jsx(u,{className:"h-8 w-1/3 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{className:"h-12 w-full"}),e.jsx(u,{className:"h-12 w-full"})]})]}),e.jsx("div",{className:"relative z-10 flex-grow",children:e.jsxs("div",{className:"mb-8",children:[e.jsx(u,{className:"h-12 w-1/4 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((r,l)=>e.jsx("div",{className:"relative p-6 h-full rounded-2xl bg-black/20 border border-white/20",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(u,{className:"w-28 h-28 rounded-full mb-4"}),e.jsx(u,{className:"h-6 w-3/4"})]})},l))})]})})]}),Ye=({isOpen:r,onClose:l,onConfirm:k,title:y,message:P,confirmText:w="Confirm",confirmVariant:_="destructive",isLoading:x=!1})=>e.jsx(L,{isOpen:r,onClose:l,title:y,icon:e.jsx(Ve,{className:"w-5 h-5"}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.jsx("p",{children:P})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(m,{type:"button",variant:"ghost",onClick:l,disabled:x,children:"Batal"}),e.jsx(m,{type:"button",variant:_,onClick:k,disabled:x,children:x?"Memproses...":w})]})]})}),Je=()=>{const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let l="";for(let k=0;k<6;k++)l+=r.charAt(Math.floor(Math.random()*r.length));return l},ia=()=>{const r=Le(),{user:l}=Pe(),k=Te(),[y,P]=n.useState(""),[w,_]=n.useState("grid"),[x,E]=n.useState(""),[F,We]=n.useState("name"),[K,le]=n.useState("all"),[ie,C]=n.useState(!1),[V,ne]=n.useState("add"),[d,de]=n.useState(null),[oe,S]=n.useState(!1),[D,ce]=n.useState("add"),[z,me]=n.useState(null),[I,G]=n.useState(""),[xe,M]=n.useState(!1),[v,p]=n.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},confirmVariant:"destructive"}),[i,b]=n.useState(null),{data:ge,isLoading:ue,isError:U,error:H}=Oe({queryKey:["studentsPageData",l==null?void 0:l.id],queryFn:async()=>{if(!l)return null;const[a,s]=await Promise.all([f.from("classes").select("*").eq("user_id",l.id).order("name"),f.from("students").select("*").eq("user_id",l.id)]);if(a.error)throw new Error(a.error.message);if(s.error)throw new Error(s.error.message);return{classes:a.data||[],students:s.data||[]}},enabled:!!l});n.useEffect(()=>{U&&r.error(`Gagal memuat data: ${H.message}`)},[U,H,r]);const{students:N=[],classes:h=[]}=ge||{};n.useEffect(()=>{h&&h.length>0&&!x&&E(h[0].id)},[h,x]);const c={onSuccess:()=>{k.invalidateQueries({queryKey:["studentsPageData"]})},onError:a=>r.error(`Error: ${a.message}`)},{mutate:he,isPending:R}=j({mutationFn:async a=>{const{error:s}=await f.from("students").insert([a]);if(s)throw s},...c,onSuccess:()=>{c.onSuccess(),r.success("Siswa berhasil ditambahkan."),C(!1)}}),{mutate:fe,isPending:Q}=j({mutationFn:async({id:a,...s})=>{const{error:t}=await f.from("students").update(s).eq("id",a);if(t)throw t},...c,onSuccess:()=>{c.onSuccess(),r.success("Siswa berhasil diperbarui."),C(!1)}}),{mutate:be,isPending:pe}=j({mutationFn:async a=>{const{error:s}=await f.from("students").delete().eq("id",a);if(s)throw s},...c,onSuccess:()=>{c.onSuccess(),r.success("Siswa berhasil dihapus."),p(a=>({...a,isOpen:!1}))}}),{mutate:je,isPending:Y}=j({mutationFn:async a=>{const{error:s}=await f.from("classes").insert([a]);if(s)throw s},...c,onSuccess:()=>{c.onSuccess(),r.success("Kelas berhasil ditambahkan."),S(!1)}}),{mutate:ke,isPending:J}=j({mutationFn:async({id:a,...s})=>{const{error:t}=await f.from("classes").update(s).eq("id",a);if(t)throw t},...c,onSuccess:()=>{c.onSuccess(),r.success("Kelas berhasil diperbarui."),S(!1)}}),{mutate:ye,isPending:we}=j({mutationFn:async a=>{const{error:s}=await f.from("classes").delete().eq("id",a);if(s)throw s},...c,onSuccess:()=>{c.onSuccess(),r.success("Kelas berhasil dihapus."),p(a=>({...a,isOpen:!1}))}}),{mutate:ve,isPending:Ne}=j({mutationFn:async a=>{const t=N.filter(o=>o.class_id===a).filter(o=>!o.access_code).map(o=>({id:o.id,name:o.name,class_id:o.class_id,avatar_url:o.avatar_url,user_id:o.user_id,gender:o.gender,access_code:Je()}));if(t.length===0)return{message:"Semua siswa di kelas ini sudah memiliki kode akses."};const{error:g}=await f.from("students").upsert(t);if(g)throw g;return{count:t.length}},...c,onSuccess:a=>{c.onSuccess(),a.message?r.info(a.message):r.success(`${a.count} kode akses baru berhasil dibuat.`),p(s=>({...s,isOpen:!1}))}}),W=n.useMemo(()=>{let a=N.filter(s=>s.class_id===x);return y&&(a=a.filter(s=>s.name.toLowerCase().includes(y.toLowerCase()))),K!=="all"&&(a=a.filter(s=>s.gender===K)),a.sort((s,t)=>F==="name"?s.name.localeCompare(t.name,"id-ID"):s.gender.localeCompare(t.gender))},[y,N,x,F,K]),T=n.useMemo(()=>{const a=N.filter(g=>g.class_id===x),s=a.filter(g=>g.gender==="Laki-laki").length,t=a.filter(g=>g.gender==="Perempuan").length;return{total:a.length,male:s,female:t}},[N,x]),O=(a,s=null)=>{if(h.length===0){r.warning("Silakan tambah data kelas terlebih dahulu sebelum menambah siswa.");return}ne(a),de(s),C(!0)},Ce=a=>{if(a.preventDefault(),!l)return;const s=new FormData(a.currentTarget),t=s.get("name"),g=s.get("class_id"),o=s.get("gender"),X=`https://avatar.iran.liara.run/public/${o==="Laki-laki"?"boy":"girl"}?username=${encodeURIComponent(t||Date.now())}`;if(V==="add"){const B={name:t,class_id:g,user_id:l.id,gender:o,avatar_url:X};he(B)}else if(d){const B=d.gender!==o||d.avatar_url.includes("pravatar")?X:d.avatar_url,Ie={name:t,class_id:g,gender:o,avatar_url:B};fe({id:d.id,...Ie})}},Se=a=>{p({isOpen:!0,title:"Hapus Siswa",message:`Apakah Anda yakin ingin menghapus data siswa "${a.name}" secara permanen?`,onConfirm:()=>be(a.id),confirmVariant:"destructive",confirmText:"Ya, Hapus Siswa"})},Z=(a,s=null)=>{ce(a),me(s),G((s==null?void 0:s.name)||""),S(!0)},Me=a=>{a.preventDefault(),!(!l||!I)&&(D==="add"?je({name:I,user_id:l.id}):z&&ke({id:z.id,name:I}))},_e=a=>{const s=N.filter(t=>t.class_id===a.id).length;if(s>0){r.error(`Tidak dapat menghapus kelas "${a.name}" karena masih ada ${s} siswa di dalamnya.`);return}p({isOpen:!0,title:"Hapus Kelas",message:`Apakah Anda yakin ingin menghapus kelas "${a.name}"?`,onConfirm:()=>ye(a.id),confirmVariant:"destructive",confirmText:"Ya, Hapus Kelas"})},Ke=a=>{p({isOpen:!0,title:"Buat Kode Akses Massal",message:`Ini akan membuat kode akses untuk semua siswa di kelas "${a.name}" yang belum memilikinya. Lanjutkan?`,onConfirm:()=>ve(a.id),confirmVariant:"default",confirmText:"Ya, Buat Kode"})};return ue?e.jsx(Qe,{}):e.jsxs("div",{className:"w-full min-h-full p-4 sm:p-6 md:p-8 flex flex-col space-y-6 max-w-7xl mx-auto",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Manajemen Siswa"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-indigo-200",children:"Kelola data siswa dan kelas Anda."})]}),e.jsx("div",{className:"sticky top-0 z-30 bg-gray-50/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 -mx-4 px-4 sm:static sm:bg-transparent sm:p-0 sm:mx-0 border-b sm:border-none border-gray-200 dark:border-gray-800 transition-all",children:e.jsxs("div",{className:"flex flex-col gap-3 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Be,{className:"h-5 w-5 text-gray-400 group-focus-within:text-indigo-500 transition-colors"})}),e.jsx($,{type:"text",placeholder:"Cari siswa...",value:y,onChange:a=>P(a.target.value),className:"pl-11 h-12 text-base w-full shadow-sm border-gray-200 dark:border-gray-700 focus:ring-2 focus:ring-indigo-500 rounded-2xl bg-white dark:bg-gray-800"}),e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1 bg-gray-100 dark:bg-gray-700 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>_("grid"),className:`p-2 rounded-lg transition-all ${w==="grid"?"bg-white dark:bg-gray-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:e.jsx($e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_("list"),className:`p-2 rounded-lg transition-all ${w==="list"?"bg-white dark:bg-gray-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:e.jsx(Ae,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0 mask-image-linear-gradient",children:[e.jsxs(m,{size:"sm",onClick:()=>O("add"),className:"flex-shrink-0 rounded-full shadow-md bg-indigo-600 hover:bg-indigo-700 text-white border-none",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"})," Siswa Baru"]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-700 mx-2 flex-shrink-0"}),[{id:"all",label:"Semua",count:T.total,activeClass:"bg-gray-900 text-white dark:bg-white dark:text-gray-900",inactiveClass:"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700"},{id:"Laki-laki",label:"Laki-laki",count:T.male,activeClass:"bg-blue-600 text-white shadow-blue-200",inactiveClass:"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700"},{id:"Perempuan",label:"Perempuan",count:T.female,activeClass:"bg-pink-600 text-white shadow-pink-200",inactiveClass:"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700"}].map(a=>e.jsxs("button",{onClick:()=>le(a.id),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap shadow-sm hover:shadow-md ${K===a.id?a.activeClass:a.inactiveClass}`,children:[a.label," ",e.jsxs("span",{className:"opacity-70 ml-1 text-xs",children:["(",a.count,")"]})]},a.id))]})]})}),e.jsx("main",{className:"flex-grow",children:e.jsxs(ze,{value:x,onValueChange:E,className:"w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[e.jsx(Ge,{className:"bg-transparent p-0 gap-2 flex-wrap h-auto",children:h.map(a=>e.jsx(Ue,{value:a.id,className:"data-[state=active]:bg-indigo-100 data-[state=active]:text-indigo-700 dark:data-[state=active]:bg-indigo-900/30 dark:data-[state=active]:text-indigo-300 border border-transparent data-[state=active]:border-indigo-200 dark:data-[state=active]:border-indigo-800 rounded-full px-4 py-2 transition-all",children:a.name},a.id))}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>M(!0),className:"rounded-full border-dashed border-gray-300 text-gray-500 hover:text-indigo-600 hover:border-indigo-300",children:[e.jsx(A,{className:"w-3.5 h-3.5 mr-2"})," Kelola Kelas"]})]}),h.map(a=>e.jsx(He,{value:a.id,className:"mt-0",children:W.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center animate-fade-in",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-6",children:e.jsx(qe,{className:"w-12 h-12 text-gray-300 dark:text-gray-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Belum Ada Siswa"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-xs mx-auto",children:"Kelas ini masih kosong atau tidak ada siswa yang cocok dengan filter pencarian."}),e.jsx(m,{variant:"outline",className:"mt-6",onClick:()=>O("add"),children:"Tambah Siswa Baru"})]}):e.jsx("div",{className:w==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6":"space-y-3",children:W.map((s,t)=>w==="grid"?e.jsxs(re,{className:"relative p-0 group overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-1 bg-white dark:bg-gray-800 rounded-2xl",style:{animationDelay:`${t*50}ms`},children:[e.jsx("div",{className:`h-24 w-full bg-gradient-to-br ${s.gender==="Laki-laki"?"from-blue-400 to-indigo-500":"from-pink-400 to-rose-500"} opacity-80`}),e.jsxs("div",{className:"px-5 pb-6 flex flex-col items-center -mt-12",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.avatar_url,alt:s.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-md bg-white dark:bg-gray-700"}),e.jsx("div",{className:`absolute bottom-1 right-1 w-7 h-7 rounded-full border-2 border-white dark:border-gray-800 flex items-center justify-center shadow-sm ${s.gender==="Laki-laki"?"bg-blue-500":"bg-pink-500"}`,children:e.jsx("span",{className:"text-white text-[10px] font-bold",children:s.gender==="Laki-laki"?"L":"P"})})]}),e.jsx("h4",{className:"mt-3 font-bold text-lg text-gray-900 dark:text-white text-center line-clamp-1 w-full px-2",children:s.name}),e.jsx("div",{className:"mt-1 flex items-center gap-2",children:e.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:s.access_code||"No Code"})}),e.jsxs("div",{className:"mt-4 flex gap-2 w-full",children:[e.jsx(q,{to:`/siswa/${s.id}`,className:"flex-1 py-2 text-center text-sm font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-colors",children:"Detail"}),e.jsx("button",{onClick:()=>b(s),className:"w-10 flex items-center justify-center rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:e.jsx(ae,{className:"w-5 h-5"})})]})]})]},s.id):e.jsxs(re,{className:"p-3 flex items-center gap-4 transition-all duration-200 hover:bg-gray-50 dark:hover:bg-white/5 border-l-4 border-transparent hover:border-indigo-500",style:{animationDelay:`${t*30}ms`},children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:s.avatar_url,alt:s.name,className:"w-14 h-14 rounded-full object-cover bg-gray-100 dark:bg-gray-700"}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white dark:border-gray-800 flex items-center justify-center ${s.gender==="Laki-laki"?"bg-blue-500":"bg-pink-500"}`,children:e.jsx("span",{className:"text-white text-[8px] font-bold",children:s.gender==="Laki-laki"?"L":"P"})})]}),e.jsxs(q,{to:`/siswa/${s.id}`,className:"flex-grow min-w-0 flex flex-col justify-center h-full py-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate text-base",children:s.name}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Kode: ",e.jsx("span",{className:"font-mono font-medium text-gray-700 dark:text-gray-300",children:s.access_code||"-"})]})})]}),e.jsx(m,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>b(s),children:e.jsx(ae,{className:"w-5 h-5"})})]},s.id))})},a.id))]})}),e.jsx(Re,{isOpen:!!i,onClose:()=>b(null),title:(i==null?void 0:i.name)||"Aksi Siswa",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(q,{to:`/siswa/${i==null?void 0:i.id}`,className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",onClick:()=>b(null),children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Lihat Detail"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lihat profil, nilai, dan absensi"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-left",onClick:()=>{i&&(O("edit",i),b(null))},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Edit Data"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ubah nama, kelas, atau foto"})]})]}),!(i!=null&&i.access_code)&&e.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-left",onClick:()=>{r.info("Fitur generate kode per siswa akan segera hadir. Gunakan fitur massal di menu kelas."),b(null)},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Buat Kode Akses"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Generate kode login siswa"})]})]}),(i==null?void 0:i.access_code)&&e.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-left",onClick:()=>{navigator.clipboard.writeText(i.access_code||""),r.success("Kode akses disalin!"),b(null)},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-600 dark:text-gray-400",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Salin Kode"}),e.jsx("p",{className:"text-xs text-gray-500",children:i.access_code})]})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-800 my-1"}),e.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors text-left group",onClick:()=>{i&&(Se(i),b(null))},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400 group-hover:bg-red-200 dark:group-hover:bg-red-900/50 transition-colors",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-red-600 dark:text-red-400",children:"Hapus Siswa"}),e.jsx("p",{className:"text-xs text-red-400/70",children:"Tindakan ini tidak dapat dibatalkan"})]})]})]})}),e.jsx(L,{isOpen:ie,onClose:()=>C(!1),title:V==="add"?"Tambah Siswa Baru":"Edit Siswa",children:e.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"student-name",children:"Nama Lengkap"}),e.jsx($,{id:"student-name",name:"name",defaultValue:(d==null?void 0:d.name)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"student-class",children:"Kelas"}),e.jsx(De,{id:"student-class",name:"class_id",defaultValue:(d==null?void 0:d.class_id)||x,required:!0,children:h.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Jenis Kelamin"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"gender",value:"Laki-laki",defaultChecked:(d==null?void 0:d.gender)!=="Perempuan",className:"form-radio"}),e.jsx("span",{className:"ml-2",children:"Laki-laki"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"gender",value:"Perempuan",defaultChecked:(d==null?void 0:d.gender)==="Perempuan",className:"form-radio"}),e.jsx("span",{className:"ml-2",children:"Perempuan"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(m,{type:"button",variant:"ghost",onClick:()=>C(!1),children:"Batal"}),e.jsx(m,{type:"submit",disabled:R||Q,children:R||Q?"Menyimpan...":"Simpan"})]})]})}),e.jsxs(L,{isOpen:xe,onClose:()=>M(!1),title:"Kelola Kelas",children:[e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:h.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-100 dark:bg-black/20",children:[e.jsx("span",{className:"font-semibold",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>{M(!1),Ke(a)},title:"Buat kode akses massal",children:e.jsx(se,{className:"h-4 w-4 text-green-500"})}),e.jsx(m,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>{M(!1),Z("edit",a)},children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(m,{size:"icon",variant:"ghost",className:"h-7 w-7 text-red-500",onClick:()=>_e(a),children:e.jsx(te,{className:"h-4 w-4"})})]})]},a.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-white/10",children:e.jsxs(m,{onClick:()=>{M(!1),Z("add")},className:"w-full",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Tambah Kelas Baru"]})})]}),e.jsx(L,{isOpen:oe,onClose:()=>S(!1),title:D==="add"?"Tambah Kelas Baru":"Edit Kelas",children:e.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"class-name",children:"Nama Kelas"}),e.jsx($,{id:"class-name",value:I,onChange:a=>G(a.target.value),required:!0,placeholder:"cth. 7A"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(m,{type:"button",variant:"ghost",onClick:()=>S(!1),children:"Batal"}),e.jsx(m,{type:"submit",disabled:Y||J,children:Y||J?"Menyimpan...":"Simpan"})]})]})}),e.jsx(Ye,{isOpen:v.isOpen,onClose:()=>p(a=>({...a,isOpen:!1})),onConfirm:v.onConfirm,title:v.title,message:v.message,confirmText:v.confirmText,confirmVariant:v.confirmVariant,isLoading:pe||we||Ne})]})};export{ia as default};

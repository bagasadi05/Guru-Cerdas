const h=(m,d)=>new Promise((w,r)=>{const i=new FileReader;i.readAsDataURL(m),i.onload=s=>{var c;const a=new Image;a.src=(c=s.target)==null?void 0:c.result,a.onload=()=>{const o=document.createElement("canvas"),{maxWidth:n}=d;let{width:e,height:t}=a;e>t?e>n&&(t*=n/e,e=n):t>n&&(e*=n/t,t=n),o.width=e,o.height=t;const l=o.getContext("2d");if(!l)return r(new Error("Could not get canvas context"));l.drawImage(a,0,0,e,t),o.toBlob(g=>{g?w(g):r(new Error("Canvas to Blob conversion failed"))},"image/jpeg",d.quality)},a.onerror=o=>r(o)},i.onerror=s=>r(s)});export{h as o};
